(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(t,e,a){t.exports=a(19)},17:function(t,e,a){},19:function(t,e,a){"use strict";a.r(e);var n=a(0),c=a.n(n),r=a(11),s=a.n(r),i=(a(17),a(2)),o=a.n(i),u=a(3),l=a(4),p=a(5),h=a(7),d=a(6),m=a(1),v=a(8),b=(a(9),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(h.a)(this,Object(d.a)(e).call(this,t))).state={price:0,currency:"RUB",quantity:0},a.handleChange=a.handleChange.bind(Object(m.a)(a)),a.inputChange=a.inputChange.bind(Object(m.a)(a)),a.handleClick=a.handleClick.bind(Object(m.a)(a)),a}return Object(v.a)(e,t),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.setState({price:this.props.product.price}),this.setState({currency:this.props.product.currency}),this.setState({quantity:this.props.product.quantity})}},{key:"inputChange",value:function(t){this.setState({quantity:t.target.value})}},{key:"handleChange",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.target.value,"RUB"!==e.target.value){t.next=6;break}this.setState({price:this.props.product.price}),this.setState({currency:this.props.product.currency}),t.next=14;break;case 6:return t.next=8,fetch("/convert?price=".concat(this.props.product.price,"&to=").concat(a));case 8:return n=t.sent,t.next=11,n.json();case 11:c=t.sent,this.setState({price:c.price}),this.setState({currency:a||"RUB"});case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"handleClick",value:function(t){this.props.addToCart({name:this.props.product.name,quantity:this.state.quantity>0?this.state.quantity:0,currency:this.props.product.currency,price:this.props.product.price})}},{key:"render",value:function(){return c.a.createElement("div",{className:"column"},c.a.createElement("div",{className:"col"},this.props.product.name),c.a.createElement("div",{className:"col"},c.a.createElement("input",{type:"number",min:"1",value:this.state.quantity,onChange:this.inputChange})),c.a.createElement("div",{className:"col row"},c.a.createElement("div",null,"Price: ",this.state.price),c.a.createElement("div",null,c.a.createElement("select",{value:this.state.currency,onChange:this.handleChange},c.a.createElement("option",{value:"RUB"},"RUB"),c.a.createElement("option",{value:"EUR"},"EUR"),c.a.createElement("option",{value:"USD"},"USD")))),c.a.createElement("div",null,c.a.createElement("button",{type:"button",onClick:this.handleClick},"Add to card")))}}]),e}(c.a.Component)),y=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(h.a)(this,Object(d.a)(e).call(this,t))).state={prices:{}},a.count=a.count.bind(Object(m.a)(a)),a}return Object(v.a)(e,t),Object(p.a)(e,[{key:"count",value:function(){var t=Object(u.a)(o.a.mark((function t(e){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/count",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.props.products)});case 3:return a=t.sent,t.next=6,a.json();case 6:n=t.sent,this.setState({prices:n}),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),new Error(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return console.log(this.state),c.a.createElement("div",null,c.a.createElement("div",{className:"column"},c.a.createElement("div",{className:"col"},"Cart: ",this.props.products.length),c.a.createElement("div",{className:"col"},"Prices: ",Object.keys(this.state.prices).map((function(e){return c.a.createElement("span",{key:e},c.a.createElement("b",null," ",t.state.prices[e]," ")," ",e)}))),c.a.createElement("div",{className:"col"},c.a.createElement("button",{type:"button",onClick:this.count},"Count"))))}}]),e}(c.a.Component),f=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(h.a)(this,Object(d.a)(e).call(this,t))).state={products:[],cart:[]},a.addToCart=a.addToCart.bind(Object(m.a)(a)),a}return Object(v.a)(e,t),Object(p.a)(e,[{key:"addToCart",value:function(t){var e=this.state.cart;e.push(t),this.setState({cart:e}),console.log(this.state.cart)}},{key:"componentDidMount",value:function(){var t=Object(u.a)(o.a.mark((function t(){var e,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/getProducts");case 3:return e=t.sent,t.next=6,e.json();case 6:a=t.sent,this.setState({products:a}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,this,[[0,10]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return c.a.createElement("div",{className:"column"},c.a.createElement("div",{className:"row"},c.a.createElement(y,{products:this.state.cart})),c.a.createElement("div",{className:"row"},this.state.products.map((function(e){return c.a.createElement("div",{className:"col",key:e.id},c.a.createElement(b,{product:e,addToCart:t.addToCart}))}))))}}]),e}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},9:function(t,e,a){}},[[12,1,2]]]);
//# sourceMappingURL=main.f46e9819.chunk.js.map